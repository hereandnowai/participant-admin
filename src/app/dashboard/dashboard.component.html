<div class="dashboard-container">
  <!-- Header -->
  <div class="header-section">
    <h1>Participant Dashboard</h1>
    <button mat-button routerLink="/participants" class="view-list-button">
      <mat-icon>list</mat-icon>
      View All Participants
    </button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-container">
    <mat-card class="error-card">
      <mat-card-content>
        <p>{{ errorMessage }}</p>
        <button mat-button color="primary" (click)="loadDashboardData()">Retry</button>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && !errorMessage">
    
    <!-- KPI Cards -->
    <div class="kpi-section">
      <div class="kpi-grid">
        <mat-card class="kpi-card total-participants">
          <mat-card-content>
            <div class="kpi-content">
              <mat-icon class="kpi-icon">people</mat-icon>
              <div class="kpi-text">
                <h3>{{ stats.totalParticipants }}</h3>
                <p>Total Participants</p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card avg-python">
          <mat-card-content>
            <div class="kpi-content">
              <mat-icon class="kpi-icon">code</mat-icon>
              <div class="kpi-text">
                <h3>{{ stats.avgPythonSkill | number:'1.1-1' }}</h3>
                <p>Avg Python Skill</p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card avg-angular">
          <mat-card-content>
            <div class="kpi-content">
              <mat-icon class="kpi-icon">web</mat-icon>
              <div class="kpi-text">
                <h3>{{ stats.avgAngularSkill | number:'1.1-1' }}</h3>
                <p>Avg Angular Skill</p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="kpi-card avg-javascript">
          <mat-card-content>
            <div class="kpi-content">
              <mat-icon class="kpi-icon">javascript</mat-icon>
              <div class="kpi-text">
                <h3>{{ stats.avgJavaScriptSkill | number:'1.1-1' }}</h3>
                <p>Avg JavaScript Skill</p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      
      <!-- Average Skills Chart -->
      <div class="chart-container">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Average Technical Skills</mat-card-title>
            <mat-card-subtitle>Average skill levels across all participants (1-10 scale)</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-wrapper">
              <canvas #avgSkillsChart></canvas>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Skill Distribution Chart -->
      <div class="chart-container">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Angular Skill Distribution</mat-card-title>
            <mat-card-subtitle>Distribution of Angular skill levels among participants</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-wrapper">
              <canvas #skillDistributionChart></canvas>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Skills Radar Chart -->
      <div class="chart-container full-width">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Technical Skills Radar</mat-card-title>
            <mat-card-subtitle>Comprehensive view of average skills across all technologies</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-wrapper">
              <canvas #skillsRadarChart></canvas>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

    </div>

    <!-- Empty State -->
    <div *ngIf="stats.totalParticipants === 0" class="empty-state">
      <mat-card class="empty-card">
        <mat-card-content>
          <mat-icon class="empty-icon">sentiment_neutral</mat-icon>
          <h2>No Participants Yet</h2>
          <p>Start by adding some participants to see meaningful dashboard insights.</p>
          <button mat-raised-button color="primary" routerLink="/participants/new">
            <mat-icon>add</mat-icon>
            Add First Participant
          </button>
        </mat-card-content>
      </mat-card>
    </div>

  </div>
</div>

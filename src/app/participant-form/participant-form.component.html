<div class="form-container">
  <!-- Header -->
  <div class="header-section">
    <h1>{{ isEditMode ? 'Edit Participant' : 'Add New Participant' }}</h1>
    <button mat-button routerLink="/participants" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Back to List
    </button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    <p>{{ isEditMode ? 'Loading participant data...' : 'Saving participant...' }}</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-container">
    <mat-card class="error-card">
      <mat-card-content>
        <p>{{ errorMessage }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Form -->
  <div *ngIf="!isLoading">
    <mat-card class="form-card">
      <mat-card-content>
        <form [formGroup]="participantForm" (ngSubmit)="onSubmit()">
          
          <!-- Basic Information Section -->
          <div class="form-section">
            <h3>Basic Information</h3>
            
            <!-- Name -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Full Name *</mat-label>
              <input matInput formControlName="name" placeholder="Enter full name">
              <mat-error *ngIf="participantForm.get('name')?.hasError('required')">
                Name is required
              </mat-error>
              <mat-error *ngIf="participantForm.get('name')?.hasError('maxlength')">
                Name must be less than 255 characters
              </mat-error>
            </mat-form-field>

            <!-- Email -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email</mat-label>
              <input matInput type="email" formControlName="email" placeholder="Enter email address">
              <mat-error *ngIf="participantForm.get('email')?.hasError('email')">
                Please enter a valid email address
              </mat-error>
            </mat-form-field>

            <!-- WhatsApp -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>WhatsApp Number</mat-label>
              <input matInput formControlName="whatsapp" placeholder="e.g., +1234567890">
              <mat-error *ngIf="participantForm.get('whatsapp')?.hasError('pattern')">
                Please enter a valid phone number (digits, +, -, spaces allowed)
              </mat-error>
            </mat-form-field>

            <!-- LinkedIn -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>LinkedIn Profile</mat-label>
              <input matInput formControlName="linkedin" placeholder="https://linkedin.com/in/username">
              <mat-error *ngIf="participantForm.get('linkedin')?.hasError('pattern')">
                Please enter a valid URL
              </mat-error>
            </mat-form-field>

            <!-- GitHub -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>GitHub Username</mat-label>
              <input matInput formControlName="github_id" placeholder="Enter GitHub username">
            </mat-form-field>
          </div>

          <!-- Skills Section -->
          <div class="form-section">
            <h3>Technical Skills (1-10 scale)</h3>
            <p class="skills-description">Rate your skill level from 1 (beginner) to 10 (expert)</p>
            
            <div class="skills-grid">
              <!-- Python Skill -->
              <div class="skill-item">
                <label>Python: {{ participantForm.get('python_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="python_skill">
                </mat-slider>
              </div>

              <!-- Angular Skill -->
              <div class="skill-item">
                <label>Angular: {{ participantForm.get('angular_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="angular_skill">
                </mat-slider>
              </div>

              <!-- JavaScript Skill -->
              <div class="skill-item">
                <label>JavaScript: {{ participantForm.get('javascript_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="javascript_skill">
                </mat-slider>
              </div>

              <!-- HTML Skill -->
              <div class="skill-item">
                <label>HTML: {{ participantForm.get('html_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="html_skill">
                </mat-slider>
              </div>

              <!-- CSS Skill -->
              <div class="skill-item">
                <label>CSS: {{ participantForm.get('css_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="css_skill">
                </mat-slider>
              </div>

              <!-- Java Skill -->
              <div class="skill-item">
                <label>Java: {{ participantForm.get('java_skill')?.value || 1 }}</label>
                <mat-slider min="1" max="10" step="1" discrete [displayWith]="formatSliderLabel">
                  <input matSliderThumb formControlName="java_skill">
                </mat-slider>
              </div>
            </div>
          </div>

          <!-- Outcome Section -->
          <div class="form-section">
            <h3>Outcome / Notes</h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Outcome or Additional Notes</mat-label>
              <textarea matInput formControlName="outcome" rows="4" 
                        placeholder="Enter any outcome notes, feedback, or additional information"></textarea>
            </mat-form-field>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button mat-button type="button" routerLink="/participants" class="cancel-button">
              Cancel
            </button>
            <button mat-raised-button color="primary" type="submit" 
                    [disabled]="participantForm.invalid || isSubmitting" class="submit-button">
              <mat-icon *ngIf="isSubmitting">hourglass_empty</mat-icon>
              {{ isSubmitting ? 'Saving...' : (isEditMode ? 'Update Participant' : 'Create Participant') }}
            </button>
          </div>

        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>

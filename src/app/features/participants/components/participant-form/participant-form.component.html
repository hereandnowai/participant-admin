<div class="form-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="title-section">
      <h1>{{ getPageTitle() }}</h1>
      <p class="subtitle">
        {{ editMode() ? 'Update participant information and skills' : 'Enter participant details and skill levels' }}
      </p>
    </div>
    
    <div class="actions-section">
      <button 
        mat-button 
        (click)="onCancel()"
        [disabled]="loading()">
        <mat-icon>keyboard_arrow_left</mat-icon>
        Back to List
      </button>
    </div>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="loading()" class="loading-section">
    <mat-spinner diameter="40"></mat-spinner>
    <p>{{ editMode() ? 'Loading participant data...' : 'Saving participant...' }}</p>
  </div>

  <!-- Form Section -->
  <form 
    *ngIf="!loading()" 
    [formGroup]="participantForm" 
    (ngSubmit)="onSubmit()" 
    class="participant-form">
    
    <mat-card class="form-card">
      <mat-card-header>
        <mat-card-title>Personal Information</mat-card-title>
        <mat-card-subtitle>Basic contact details</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="form-row">
          <!-- Name Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Full Name *</mat-label>
            <input 
              matInput 
              formControlName="name"
              placeholder="Enter full name"
              maxlength="100">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="hasError('name')">
              {{ getErrorMessage('name') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <!-- Email Field -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Email Address *</mat-label>
            <input 
              matInput 
              type="email"
              formControlName="email"
              placeholder="example@domain.com"
              maxlength="255">
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="hasError('email')">
              {{ getErrorMessage('email') }}
            </mat-error>
          </mat-form-field>

          <!-- WhatsApp Field -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>WhatsApp Number *</mat-label>
            <input 
              matInput 
              formControlName="whatsapp"
              placeholder="+91 99999 99999">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-error *ngIf="hasError('whatsapp')">
              {{ getErrorMessage('whatsapp') }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <!-- LinkedIn Field -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>LinkedIn Profile</mat-label>
            <input 
              matInput 
              formControlName="linkedin"
              placeholder="https://linkedin.com/in/username">
            <mat-icon matSuffix>link</mat-icon>
            <mat-error *ngIf="hasError('linkedin')">
              {{ getErrorMessage('linkedin') }}
            </mat-error>
          </mat-form-field>

          <!-- GitHub Field -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>GitHub ID</mat-label>
            <input 
              matInput 
              formControlName="github_id"
              placeholder="github-username"
              maxlength="50">
            <mat-icon matSuffix>code</mat-icon>
            <mat-error *ngIf="hasError('github_id')">
              {{ getErrorMessage('github_id') }}
            </mat-error>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Skills Section -->
    <mat-card class="form-card">
      <mat-card-header>
        <mat-card-title>Technical Skills</mat-card-title>
        <mat-card-subtitle>Rate proficiency level from 1 (beginner) to 10 (expert)</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="skills-grid">
          <!-- Python Skill -->
          <mat-form-field appearance="outline">
            <mat-label>Python</mat-label>
            <mat-select formControlName="python_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>code</mat-icon>
          </mat-form-field>

          <!-- Angular Skill -->
          <mat-form-field appearance="outline">
            <mat-label>Angular</mat-label>
            <mat-select formControlName="angular_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>web</mat-icon>
          </mat-form-field>

          <!-- JavaScript Skill -->
          <mat-form-field appearance="outline">
            <mat-label>JavaScript</mat-label>
            <mat-select formControlName="javascript_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>javascript</mat-icon>
          </mat-form-field>

          <!-- HTML Skill -->
          <mat-form-field appearance="outline">
            <mat-label>HTML</mat-label>
            <mat-select formControlName="html_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>web</mat-icon>
          </mat-form-field>

          <!-- CSS Skill -->
          <mat-form-field appearance="outline">
            <mat-label>CSS</mat-label>
            <mat-select formControlName="css_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>palette</mat-icon>
          </mat-form-field>

          <!-- Java Skill -->
          <mat-form-field appearance="outline">
            <mat-label>Java</mat-label>
            <mat-select formControlName="java_skill">
              <mat-option *ngFor="let level of skillLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>coffee</mat-icon>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Outcome Section -->
    <mat-card class="form-card">
      <mat-card-header>
        <mat-card-title>Training Outcome</mat-card-title>
        <mat-card-subtitle>Additional notes and outcomes</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Outcome & Notes</mat-label>
          <textarea 
            matInput 
            formControlName="outcome"
            placeholder="Enter training outcomes, feedback, or additional notes..."
            rows="4"
            maxlength="1000">
          </textarea>
          <mat-hint align="end">{{ participantForm.get('outcome')?.value?.length || 0 }}/1000</mat-hint>
          <mat-error *ngIf="hasError('outcome')">
            {{ getErrorMessage('outcome') }}
          </mat-error>
        </mat-form-field>
      </mat-card-content>
    </mat-card>

    <!-- Form Actions -->
    <div class="form-actions">
      <div class="action-buttons">
        <button 
          mat-button 
          type="button"
          (click)="onCancel()"
          [disabled]="loading()">
          Cancel
        </button>
        
        <button 
          mat-button 
          type="button"
          (click)="onReset()"
          [disabled]="loading()">
          <mat-icon>refresh</mat-icon>
          Reset
        </button>
        
        <button 
          mat-raised-button 
          color="primary"
          type="submit"
          [disabled]="loading() || participantForm.invalid">
          <mat-icon *ngIf="!loading()">{{ editMode() ? 'check_circle' : 'person_add' }}</mat-icon>
          <mat-spinner *ngIf="loading()" diameter="20"></mat-spinner>
          {{ getSubmitButtonText() }}
        </button>
      </div>
    </div>
  </form>
</div>
